# Microservice Template

Microservice Template gives you a 

1. SpringBoot App template with 
2. Open API 3 Ex, 
3. Spring Actuator, 
4. Spring Sleuth and 
5. Pom file with (SpringBoot) Fat and Thin (Maven) jar file creation and 
6. Dockerfile for containerisation.

## Service Setup

### Step 1 - Set the Org and Service Name, Versions, API Path

1. Update the Org Name in src/main/resources/app.props.tmpl file (service.org)
2. Update the microservice name in src/main/resources/app.props.tmpl file (service.name)
3. Update the API Version in src/main/resources/app.props.tmpl file (service.api.version)
4. Update the API Name in src/main/resources/app.props.tmpl file (service.api.name)
5. Update the Server Version src/main/resources/app.props.tmpl file (server.version)
6. Update the SRC_BASE (Your Service Repository Base Directory) in getServiceName shell script 

When you change the version in POM.xml, update that info in src/main/resources/app.props.tmpl - service.version property also.

###  Step 2 - Compile (Once your code is ready) 

1. compile 

The above compile script will do the following

1. Clean up the target folder
2. Generate the build no. and build date (takes application.properties backup)
3. build final output SpringBoot fat jar and maven thin jar
4. copy the jar files (and dependencis) to src/docker folder
5. copy the application.properties file to current folder and src/docker folder

In Step 2.2 application.properties file will be auto generated by the compile script. This is a critical step.
Without generated application.properties file the service will not be running.

###  Step 3 - Run and Test

2. run
3. test

## Docker Container Setup

### Step 1 - Setting Microservice Name

1. Change the EntryPoint in the Dockerfile (Last line - jar file name)

### Step 2 - Build the image

1. build
2. scan

### Step 3 - Test the image

1. start
2. logs (to view the container logs) - Wait for the Container to Startup
3. Check the URL in a Browser

### Step 4 - Push the image to Cloud Repo

1. push

### Other Commands

1. stop (Stop the Container)_
2. stats (show container stats)


